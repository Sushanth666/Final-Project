<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Movie Details</title>
  <style>
    /* Basic styling to match your wireframe */
    body { font-family: sans-serif; }
    .container { max-width: 1000px; margin: auto; }
    .main-content { float: left; width: 65%; }
    .sidebar { float: right; width: 30%; background-color: #f4f4f4; padding: 10px; }
    img { max-width: 100%; }
  </style>
</head>
<body>

  <div class="container" id="movie-details">
    <h1>Loading...</h1>
  </div>

  <script>
    // Run this function when the page loads
    document.addEventListener('DOMContentLoaded', () => {
      // 1. Get the movie ID from the URL
      const urlParams = new URLSearchParams(window.location.search);
      const movieId = urlParams.get('id');

      if (movieId) {
        fetchMovieDetails(movieId);
      } else {
        document.getElementById('movie-details').innerHTML = '<h1>No movie ID provided.</h1>';
      }
    });

    // This function fetches the single movie
    async function fetchMovieDetails(id) {
      const detailsElement = document.getElementById('movie-details');
      
      try {
        // 2. Call your new backend route
        const response = await fetch(`http://localhost:5000/api/db-movies/${id}`);
        
        if (!response.ok) {
            throw new Error(`HTTP error! Status: ${response.status}`);
        }
        
        const movie = await response.json(); // This is the single movie object
        
        console.log('Got movie details:', movie);

        // 3. Display the data (mapping to your wireframe)
        // This is where you build the HTML from the 'movie' object
        detailsElement.innerHTML = `
          <div class="main-content">
            <h1>${movie.title} (${movie.year})</h1>
            
            <img src="${movie.image}" alt="${movie.title}">
            
            <h3>Recent Reviews</h3>
            <div class="reviews">
              <p>(Review section - coming soon)</p>
            </div>
          </div>
          
          <div class="sidebar">
            <h3>Details</h3>
            <p><strong>Director:</strong> ${movie.director}</p>
            <p><strong>Language:</strong> ${movie.language}</p>
            <p><strong>Rating:</strong> ${movie.rating} / 10</p>
            
            <h3>Cast</h3>
            <ul>
              ${movie.cast.map(actor => `<li>${actor}</li>`).join('')}
            </ul>
            
            <h3>Add Your Review</h3>
            <div class="add-review">
              <p>(Review form - coming soon)</p>
            </div>
          </div>
        `;

      } catch (error) {
        console.error('Error fetching movie details:', error);
        detailsElement.innerHTML = '<h1>Error loading movie.</h1>';
      }
    }
  </script>

</body>
</html> -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Movie Details</title>
  <style>
    /* Basic styling to match your wireframe */
    body { font-family: sans-serif; }
    .container { max-width: 1000px; margin: auto; }
    .main-content { float: left; width: 65%; }
    .sidebar { float: right; width: 30%; background-color: #f4f4f4; padding: 10px; }
    img { max-width: 100%; }
  </style>
</head>
<body>

  <div class="container" id="movie-details">
    <h1>Loading...</h1>
  </div>

  <script>
    // Run this function when the page loads
    document.addEventListener('DOMContentLoaded', () => {
      // 1. Get the movie ID from the URL
      const urlParams = new URLSearchParams(window.location.search);
      const movieId = urlParams.get('id');

      if (movieId) {
        fetchMovieDetails(movieId);
      } else {
        document.getElementById('movie-details').innerHTML = '<h1>No movie ID provided.</h1>';
      }
    });

    // This function fetches the single movie
    async function fetchMovieDetails(id) {
      const detailsElement = document.getElementById('movie-details');

      try {
        // 2. Call your new backend route
        const response = await fetch(`https://moviereviewapp-6tq7.onrender.com/api/db-movies/${id}`);

        if (!response.ok) {
            throw new Error(`HTTP error! Status: ${response.status}`);
        }

        const movie = await response.json(); // This is the single movie object

        console.log('Got movie details:', movie);

        // 3. Display the data (mapping to your wireframe)
        // This is where you build the HTML from the 'movie' object
        detailsElement.innerHTML = `
          <div class="main-content">
            <h1>${movie.title} (${movie.year})</h1>

            <img src="${movie.image}" alt="${movie.title}">

            <h3>Recent Reviews</h3>
            <div class="reviews">
              <p>(Review section - coming soon)</p>
            </div>
          </div>

          <div class="sidebar">
            <h3>Details</h3>
            <p><strong>Director:</strong> ${movie.director}</p>
            <p><strong>Language:</strong> ${movie.language}</p>
            <p><strong>Rating:</strong> ${movie.rating} / 10</p>

            <h3>Cast</h3>
            <ul>
              ${movie.cast.map(actor => `<li>${actor}</li>`).join('')}
            </ul>

            <h3>Add Your Review</h3>
            <div class="add-review">
              <p>(Review form - coming soon)</p>
            </div>
          </div>
        `;

      } catch (error) {
        console.error('Error fetching movie details:', error);
        detailsElement.innerHTML = '<h1>Error loading movie.</h1>';
      }
    }
  </script>

</body>
</html>
